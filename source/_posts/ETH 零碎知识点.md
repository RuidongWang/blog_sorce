# 合约升级方案 两种

## 代理合约
代理合约使用delegatecall操作码将函数调用转发到可更新的目标合约。 由于delegatecall 
保留了函数调用的状态，因此可以更新目标合约的逻辑，并且状态将保留在代理合约中以供 
更新后的目标合约的逻辑使用。 与delegatecall一样，msg.sender将保持代理合约的调用者身份。

由于最近的拜占庭硬分叉，现在可以获取函数调用的返回大小了，因此与Nick Johnson 
首次提出的方法相比，目前这种方法可以通用。 在Daonomic的文章中可以 
看到一个通用代理合约的例子，你可以更详细地了解这个机制。

## 分离逻辑和数据合约
这中方法到将智能合约拆分两个合约：

包含数据（变量，结构，映射等）以及getter/setter的数据合约
包含如何更新这些数据的业务逻辑的逻辑合约
逻辑合约通过setter更新数据，而数据合约只允许逻辑合约调用setter。 这允许在保持数据不变 
的同时更换实现逻辑，从而实现完全可升级的系统。

通过引导用户使用新的逻辑合约（通过诸如ENS的解析器）并更新数据合约的权限来允许新的逻辑合约 
执行setter，就可以实现合约的更新。
